import csv
import sys

threshold = float(sys.argv[1])

COMMA_DIALECT = 'comma_dialect'
csv.register_dialect(COMMA_DIALECT, delimiter=',')


def run():
    input_file_name = "malware.csv"
    output_file_name = "malware_over_threshold.csv"

    input_file = open(input_file_name, 'r')
    output_file = open(output_file_name, 'w', newline="")

    csv_reader = csv.reader(input_file, COMMA_DIALECT)
    csv_writer = csv.writer(output_file, delimiter='\n')

    csv_reader.__next__()

    for line in csv_reader:
        if float(line[2]) > threshold:
            csv_writer.writerow([line[1]])

    input_file.close()
    output_file.close()


run()